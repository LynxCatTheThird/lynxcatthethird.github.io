<!DOCTYPE html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>网站速度优化指北 | LynxCatTheThird 的小窝儿</title><meta name=author content=LynxCatTheThird><meta name=copyright content=LynxCatTheThird><meta name=format-detection content="telephone=no"><meta name=theme-color content=#ffffff><meta name=description content=这个页面怎么这么慢啊啊啊啊啊啊！><meta property=og:type content=article><meta property=og:title content=网站速度优化指北><meta property=og:url content=https://lynxcatthethird-person.netlify.app/article/a63f345a/index.html><meta property=og:site_name content="LynxCatTheThird 的小窝儿"><meta property=og:description content=这个页面怎么这么慢啊啊啊啊啊啊！><meta property=og:locale content=zh_CN><meta property=og:image content=https://s2.hdslb.com/bfs/article/7637c5a0da6c6beeeed6d7ca2509de66d16762b8.jpg@1e_1c.webp><meta property=article:published_time content=2023-07-17T00:00:30.000Z><meta property=article:modified_time content=2023-07-17T00:00:30.000Z><meta property=article:author content=LynxCatTheThird><meta property=article:tag content=网站搭建><meta name=twitter:card content=summary><meta name=twitter:image content=https://s2.hdslb.com/bfs/article/7637c5a0da6c6beeeed6d7ca2509de66d16762b8.jpg@1e_1c.webp><link rel="shortcut icon" href=https://img.picgo.net/2023/01/27/avatard3d5e890a0ef78a5.webp><link rel=canonical href=https://lynxcatthethird-person.netlify.app/article/a63f345a/index.html><link rel=preconnect href=//cdn.jsdelivr.net><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.staticfile.org/node-snackbar/0.1.16/snackbar.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.staticfile.org/fancyapps-ui/5.0.19/fancybox/fancybox.min.css media=print onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!0,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,noticeOutdate:{limitDay:300,position:"top",messagePrev:"此文章最后更新于",messageNext:"天前，文章的内容可能已过时。"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},source:{justifiedGallery:{js:"https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.js",css:"https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id=config-diff>var GLOBAL_CONFIG_SITE={title:"网站速度优化指北",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-07-17 08:00:30"}</script><noscript><style type=text/css>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};var e=saveToLocal.get("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,o=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!t&&!a&&!o,t=(void 0===e?(a?activateLightMode():t?activateDarkMode():(o||n)&&((a=(new Date).getHours())<=6||18<=a?activateDarkMode:activateLightMode)(),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode:activateLightMode)()})):("light"===e?activateLightMode:activateDarkMode)(),saveToLocal.get("aside-status"));void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name=referrer content=no-referrer><script src=https://sdk.51.la/perf/js-sdk-perf.min.js crossorigin=anonymous></script><script>(new LingQue.Monitor).init({id:"3FIVcC1kwtgWSdW3"})</script><script charset=UTF-8 id=LA_COLLECT src=//sdk.51.la/js-sdk-pro.min.js></script><script>LA.init({id:"3FHtwMLrNsmeb3xo",ck:"3FHtwMLrNsmeb3xo"})</script><meta name=generator content="Hexo 6.3.0"></head><body><div id=sidebar><div id=menu-mask></div><div id=sidebar-menus><div class="avatar-img is-center"><img src=https://img.picgo.net/2023/01/27/avatard3d5e890a0ef78a5.webp onerror='onerror=null,src="/img/friend_404.gif"' alt=avatar></div><div class="sidebar-site-data site-data is-center"><a href=/archives/ ><div class=headline>文章</div><div class=length-num>5</div></a><a href=/tags/ ><div class=headline>标签</div><div class=length-num>4</div></a><a href=/categories/ ><div class=headline>分类</div><div class=length-num>6</div></a></div><hr class=custom-hr><div class=menus_items><div class=menus_item><a class=site-page href=/ ><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class=menus_item><a class=site-page href=/archives/ ><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class=menus_item><a class=site-page href=/tags/ ><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class=menus_item><a class=site-page href=/categories/ ><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 交流</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/link/ ><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href=/comment/ ><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></li></ul></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/aboutme/ ><i class="fa-fw fas fa-user"></i><span> 关于我</span></a></li><li><a class="site-page child" href=/aboutsite/ ><i class="fa-fw fas fa-earth-americas"></i><span> 关于小站</span></a></li><li><a class="site-page child" href=/thanks/ ><i class="fa-fw fas fa-heart"></i><span> 鸣谢</span></a></li><li><a class="site-page child" href=/policy/ ><i class="fa-fw fas fa-envelope-open-text"></i><span> 条款与政策</span></a></li></ul></div></div></div></div><div class=post id=body-wrap><header class=post-bg id=page-header style=background-image:url(https://s2.hdslb.com/bfs/article/7637c5a0da6c6beeeed6d7ca2509de66d16762b8.jpg@1e_1c.webp)><nav id=nav><span id=blog-info><a href=/ title="LynxCatTheThird 的小窝儿"><span class=site-name>LynxCatTheThird 的小窝儿</span></a></span><div id=menus><div id=search-button><a class="site-page social-icon search" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class=menus_items><div class=menus_item><a class=site-page href=/ ><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class=menus_item><a class=site-page href=/archives/ ><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class=menus_item><a class=site-page href=/tags/ ><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class=menus_item><a class=site-page href=/categories/ ><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 交流</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/link/ ><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href=/comment/ ><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></li></ul></div><div class=menus_item><a class="site-page group" href=javascript:void(0); rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/aboutme/ ><i class="fa-fw fas fa-user"></i><span> 关于我</span></a></li><li><a class="site-page child" href=/aboutsite/ ><i class="fa-fw fas fa-earth-americas"></i><span> 关于小站</span></a></li><li><a class="site-page child" href=/thanks/ ><i class="fa-fw fas fa-heart"></i><span> 鸣谢</span></a></li><li><a class="site-page child" href=/policy/ ><i class="fa-fw fas fa-envelope-open-text"></i><span> 条款与政策</span></a></li></ul></div></div><div id=toggle-menu><a class=site-page href=javascript:void(0); rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id=post-info><h1 class=post-title>网站速度优化指北</h1><div id=post-meta><div class=meta-firstline><span class=post-meta-date><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class=post-meta-label>发表于</span><time class=post-meta-date-created datetime=2023-07-17T00:00:30.000Z title="发表于 2023-07-17 08:00:30">2023-07-17</time><span class=post-meta-separator>|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class=post-meta-label>更新于</span><time class=post-meta-date-updated datetime=2023-07-17T00:00:30.000Z title="更新于 2023-07-17 08:00:30">2023-07-17</time></span><span class=post-meta-categories><span class=post-meta-separator>|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/ >科学与技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA/ >计算机</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class=post-meta-categories href=/categories/%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/ >网站搭建</a></span></div><div class=meta-secondline><span class=post-meta-separator>|</span><span class=post-meta-wordcount><i class="far fa-file-word fa-fw post-meta-icon"></i><span class=post-meta-label>字数总计:</span><span class=word-count>1.7k</span><span class=post-meta-separator>|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class=post-meta-label>阅读时长:</span><span>6分钟</span></span><span class=post-meta-separator>|</span><span class=post-meta-pv-cv id="" data-flag-title=网站速度优化指北><i class="far fa-eye fa-fw post-meta-icon"></i><span class=post-meta-label>阅读量:</span><span id=busuanzi_value_page_pv><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class=layout id=content-inner><div id=post><article class=post-content id=article-container><div class="note warning simple"><p>未经专业测试，仅为个人使用体验</p></div><p>在开始之前，有这么一个网站：<a href=https://lynxcatthethird-person.netlify.app/html/loading.html>https://lynxcatthethird-person.netlify.app/html/loading.html</a>。</p><p>这里面引入了五套字体，每套字体 3 个或 9 个字重，共计需要加载 1000～2000 个字体文件。那么，这个网页的速度与性能，会差到什么程度？</p><p>由此，我们引出本文的话题：</p><h1 id=减少下载资源的数量与大小>减少下载资源的数量与大小</h1><p>此话不必多说，但应如何做到呢？</p><h2 id=合并文件>合并文件</h2><p>文件的存储与传输都是按照一定的簇（数据包）来执行的。举个例子：有 100 个小文件，大小均为 1KB，簇（数据包）大小为 4KB，则它们的总大小为 400KB，而非 100KB！这无形之中就多了 300KB。而且，更多的文件就意味着更多的连接、请求、下载次数，耗时相当可观。</p><p>合并文件的主要方法有：</p><ol><li>将多个 CSS/JS 合并为一个<br>可参见<a target=_blank rel="noopener external nofollow noreferrer" href=https://kmar.top/posts/7d9fb37e/ >网站加载速度优化方案总结 | 山岳库博</a></li><li>将 CSS/JS 嵌入至 HTML 中</li></ol><h2 id=压缩文件>压缩文件</h2><p>HTML/JS/Css 文件中的回车、部分空格、注释等仅起提高可读性的作用，却仍占用相当大体积，因此应将其删去。</p><div class=tabs id=方案><ul class=nav-tabs><li class="tab active"><button type=button data-href=#方案-1>方案 1</button></li><li class=tab><button type=button data-href=#方案-2>方案 2</button></li></ul><div class=tab-contents><div class="tab-item-content active" id=方案-1><p>乐特的 <code>hexo-minify</code> 插件</p><figure class="highlight bash"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-minify --save</span><br></pre></td></tr></tbody></table></figure><p>在博客目录下 <code>_config.yml</code> 添加如下配置：</p><figure class="highlight yaml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br></pre></td><td class=code><pre><span class=line><span class=comment>## Hexo-minify Default Config Options</span></span><br><span class=line><span class=attr>minify:</span></span><br><span class=line>  <span class=attr>preview:</span> <span class=literal>false</span> <span class=comment>## 本地预览时是否压缩</span></span><br><span class=line>  <span class=attr>exclude:</span> [<span class=string>"*.min.*"</span>]</span><br><span class=line>  <span class=attr>js:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=attr>sourceMap:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>false</span> <span class=comment>## 生成 sourceMap</span></span><br><span class=line>      <span class=comment>## 将 sourceMappingURL 插入压缩后的 js 文件，如果为 false 则需要在浏览器开发者工具中手动添加 sourceMap</span></span><br><span class=line>      <span class=attr>sourceMappingURL:</span> <span class=literal>false</span> <span class=comment>## //# sourceMappingURL=xxx.js.map</span></span><br><span class=line>    <span class=comment>## 详细配置: https://github.com/terser/terser#minify-options</span></span><br><span class=line>    <span class=attr>options:</span> {}</span><br><span class=line>  <span class=attr>css:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=comment>## 详细配置: https://github.com/clean-css/clean-css#compatibility-modes</span></span><br><span class=line>    <span class=attr>options:</span> {}</span><br><span class=line>  <span class=attr>html:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=comment>## 详细配置: https://github.com/kangax/html-minifier#options-quick-reference</span></span><br><span class=line>    <span class=attr>options:</span></span><br><span class=line>      <span class=attr>minifyJS:</span> <span class=literal>true</span> <span class=comment># Compressed JavaScript</span></span><br><span class=line>      <span class=attr>minifyCSS:</span> <span class=literal>true</span> <span class=comment># CSS Compressed</span></span><br><span class=line>      <span class=attr>removeComments:</span> <span class=literal>true</span> <span class=comment># Remove the comments</span></span><br><span class=line>      <span class=attr>collapseWhitespace:</span> <span class=literal>true</span> <span class=comment># Delete any extra space</span></span><br><span class=line>      <span class=attr>removeAttributeQuotes:</span> <span class=literal>true</span> <span class=comment># Delete attribute quotes</span></span><br><span class=line>  <span class=attr>image:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>    <span class=attr>svg:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment>## 详细配置: https://github.com/imagemin/imagemin-svgo#imageminsvgooptionsbuffer</span></span><br><span class=line>      <span class=attr>options:</span> {}</span><br><span class=line>    <span class=attr>jpg:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment>## 详细配置: https://github.com/imagemin/imagemin-jpegtran#options</span></span><br><span class=line>      <span class=attr>options:</span> {}</span><br><span class=line>    <span class=attr>png:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment>## 详细配置: https://github.com/imagemin/imagemin-pngquant#options</span></span><br><span class=line>      <span class=attr>options:</span> {}</span><br><span class=line>    <span class=attr>gif:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment>## 详细配置: https://www.npmjs.com/package/imagemin-gifsicle#options</span></span><br><span class=line>      <span class=attr>options:</span> {}</span><br><span class=line>    <span class=attr>webp:</span></span><br><span class=line>      <span class=attr>enable:</span> <span class=literal>true</span></span><br><span class=line>      <span class=comment>## 详细配置: https://github.com/imagemin/imagemin-webp#options</span></span><br><span class=line>      <span class=attr>options:</span> {}</span><br><span class=line>  <span class=attr>font:</span></span><br><span class=line>    <span class=attr>enable:</span> <span class=literal>false</span></span><br><span class=line>    <span class=comment>## 详细配置: https://github.com/Lete114/fontmin-spider#api</span></span><br><span class=line>    <span class=attr>options:</span> {}</span><br></pre></td></tr></tbody></table></figure><button type=button class=tab-to-top aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class=tab-item-content id=方案-2><p>来源：<a target=_blank rel="noopener external nofollow noreferrer" href=https://argvchs.github.io/2022/08/27/hexo-minify-static-files/ >Hexo 压缩静态文件 | Argvchs の小窝</a></p><figure class="highlight bash"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-html-minifier hexo-clean-css hexo-uglify --save</span><br></pre></td></tr></tbody></table></figure><p>在博客目录下 <code>_config.yml</code> 添加如下配置：</p><figure class="highlight yaml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre></td><td class=code><pre><span class=line><span class=attr>uglify:</span></span><br><span class=line>  <span class=attr>mangle:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>output:</span></span><br><span class=line>  <span class=attr>compress:</span></span><br><span class=line>  <span class=attr>exclude:</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>"*.min.js"</span></span><br><span class=line></span><br><span class=line><span class=attr>clean_css:</span></span><br><span class=line>  <span class=attr>exclude:</span></span><br><span class=line>    <span class=bullet>-</span> <span class=string>"*.min.css"</span></span><br><span class=line></span><br><span class=line><span class=attr>html_minifier:</span></span><br><span class=line>  <span class=attr>collapseBooleanAttributes:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>collapseWhitespace:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>ignoreCustomComments:</span> [<span class=type>!!js/regexp</span> <span class=string>/^\s*more/</span>]</span><br><span class=line>  <span class=attr>removeComments:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>removeEmptyAttributes:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>removeScriptTypeAttributes:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>removeStyleLinkTypeAttributes:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>minifyJS:</span> <span class=literal>true</span></span><br><span class=line>  <span class=attr>minifyCSS:</span> <span class=literal>true</span></span><br></pre></td></tr></tbody></table></figure><button type=button class=tab-to-top aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id=减少-CSS-JS-加载数>减少 CSS/JS 加载数</h2><p>更多的文件意味着更长的加载用时与渲染用时（RAM 时间与 CPU 时间），因此应慎重引入。</p><p>以 Butterfly 主题为例，若您并不必需某些组件（如 abcjs），则应将其关闭。若您并不明确某些功能（如 Layload 与 Service&nbsp;Worker）的利与弊的大小关系，则也不应轻易启用。常见的有：</p><h3 id=附加组件><abbr title="abcjs，Mermaid，Katex/MathJax，Aplayer，美化插件（Firework 等）">附加组件</abbr></h3><p>这些东西并非必需，不应以多多益善为由开启。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=attr>aplayerInject:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br></pre></td></tr></tbody></table></figure><p><em>(此处略去，请自行判断)</em></p><h3 id=预加载>预加载</h3><p>在网速足够快时，开启它作用并似乎不明显。但对于部署于 Github Pages 等平台的情况，建议开启。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=attr>instantpage:</span> <span class=literal>true</span></span><br></pre></td></tr></tbody></table></figure><h3 id=懒加载>懒加载</h3><p>在图床速度足够快、图片足够优秀时，开启它作用并不明显，反而可能导致某些资源的加载被阻塞，从而导致网页持续地转圈。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=attr>lazyload:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>false</span></span><br></pre></td></tr></tbody></table></figure><h3 id=PJax-Service-Worker>PJax/Service&nbsp;Worker</h3><p>若您不明确对缓存进行调控所减少的下载用时与 JS 拉长的 CPU 用时之间的利弊关系，则不应随意开启。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=attr>pjax:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>true</span></span><br></pre></td></tr></tbody></table></figure><h3 id=字体>字体</h3><p>字体文件往往体积巨大，渲染起来又费时费力，不应过多引入。</p><h1 id=保证资源加载畅通>保证资源加载畅通</h1><p>在引用资源前，应确保来源稳定可靠。若其速度不稳定或服务时好时坏，可能会导致卡加载动画或卡白屏。</p><p>应对资源和服务进行维护 / 监控或选择可靠的来源，引入前应进行<a target=_blank rel="noopener external nofollow noreferrer" href=https://itdog.cn/ >多地 Ping/HTTP 测试</a>，确保多地访问通畅。</p><p>若确因资金 / 政策 / 网络环境等原因不能保证服务时时可用，可用 CDN 竞速、资源镜像或 IP 属地判断等技术缓解。具体按可以参见<a target=_blank rel="noopener external nofollow noreferrer" href=https://kmar.top/posts/73014407/ >《小白也能用的 SW 构建插件》 | 山岳库博</a>。</p><h1 id=停用加载动画与入场动画>停用加载动画与入场动画</h1><p>很多朋友为了网页美观性往往会添加加载动画，但正如前面所说，只要有一条资源有问题，就会阻塞整个加载动画，致使网页迟迟显示不出有效内容。纵使是非全屏式动画（pace_css），也仿佛在提示用户 “嘿！我还没加载完呢！” 十分影响观念，建议关闭。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=attr>preloader:</span></span><br><span class=line>  <span class=attr>enable:</span> <span class=literal>false</span></span><br></pre></td></tr></tbody></table></figure><p>入场动画则会影响渲染初期的效率，抢占渲染其它内容所需的 CPU 与 GPU，在某些低端设备或 GPU 有问题的设备上可能会引起卡顿，建议关闭。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=attr>enter_transitions:</span> <span class=literal>false</span></span><br></pre></td></tr></tbody></table></figure><h1 id=使用合适的-CDN>使用合适的 CDN</h1><p>打个比方，假如您在上海，收快递时，快递从苏州还是美国发过来快？显然是苏州！CDN 也同理。市面上常用的公益 CDN（JSDelivr，&nbsp;UnPKG，CDNJS）等多没有大陆节点，使用此类 CDN, 数据包往往要 “漂洋过海来看你”，速度堪忧。而对于此问题，只需切换 CDN 即可。</p><p>以 Butterfly&nbsp;为例，可在配置中将 CDN 来源设为 custom 以使用国内 CDN（如 Staticfile）：</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=attr>CDN:</span></span><br><span class=line>  <span class=attr>third_party_provider:</span> <span class=string>custom</span></span><br><span class=line>  <span class=attr>version:</span> <span class=literal>false</span></span><br><span class=line>  <span class=attr>custom_format:</span> <span class=string>https://cdn.staticfile.org/${cdnjs_name}/${version}/${min_cdnjs_file}</span></span><br></pre></td></tr></tbody></table></figure><p>若国内源无法包含所有所需文件，还可以给某资源设定单独链接。</p><figure class="highlight yml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=attr>CDN:</span></span><br><span class=line>  <span class=attr>option:</span></span><br><span class=line>    <span class=attr>busuanzi:</span> <span class=string>https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js</span></span><br></pre></td></tr></tbody></table></figure><p>若您的站点面向全球用户，则可选择 CDN 竞选、并发请求，IP 筛选等策略。具体按可以参见<a target=_blank rel="noopener external nofollow noreferrer" href=https://kmar.top/posts/73014407/ >《小白也能用的 SW 构建插件》 | 山岳库博</a>。</p><h1 id=优化图片>优化图片</h1><p>图片作为媒体的重头戏，在网页上不可或缺。随着图片体积的增大，图片所带来的负担也不容小觑。优化图片的要做的是减小体积，其方法有：</p><ol><li>手动降低分辨率、位深、色彩精度之类</li><li>使用工具进行无损或低损压缩<br>参见：<a target=_blank rel="noopener external nofollow noreferrer" href=https://butterfly.js.org/posts/4073eda/#%E5%9C%96%E7%89%87%E5%A3%93%E7%B8%AE>Butterfly 安裝文檔 (六) 進階教程 | Butterfly</a></li><li>将 PNG，JPG 等格式转为 WeBP 或 Avif 格式<br>此类图片发布日期较新，有许多新技术以及新特征（比如在保证质量不太差的前提下，最大程度压缩体积），利于网页使用</li><li>将 Gif 换用 APNG 或 MP4<br>Gif 不仅体积巨大，质量差，渲染还十分费力，不如直接用视频</li></ol></article><div class=post-copyright><div class=post-copyright__author><span class=post-copyright-meta>文章作者: </span><span class=post-copyright-info><a href=https://lynxcatthethird-person.netlify.app>LynxCatTheThird</a></span></div><div class=post-copyright__type><span class=post-copyright-meta>文章链接: </span><span class=post-copyright-info><a href=https://lynxcatthethird-person.netlify.app/article/a63f345a/ >https://lynxcatthethird-person.netlify.app/article/a63f345a/</a></span></div><div class=post-copyright__notice><span class=post-copyright-meta>版权声明: </span><span class=post-copyright-info>本博客所有文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ rel="external nofollow noreferrer" target=_blank>CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href=https://lynxcatthethird-person.netlify.app target=_blank>LynxCatTheThird 的小窝儿</a>！</span></div></div><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/ >网站搭建</a></div><div class=post_share></div></div><nav class=pagination-post id=pagination><div class="next-post pull-full"><a href=/article/4097fa9/ title=类原生优化计划><img class=cover src=https://s2.hdslb.com/bfs/article/eecc20f3eb6a274a1a46c985c1706df57bfde092.jpg@1e_1c.webp onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class=pagination-info><div class=label>下一篇</div><div class=next_info>类原生优化计划</div></div></a></div></nav><div class=relatedPosts><div class=headline><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class=relatedPosts-list><div><a href=/article/f672cc4e/ title=图床测试><img class=cover src=https://s2.hdslb.com/bfs/article/760e7faa22a466d6bb26d3dd9aba1af2160f5514.jpg@1e_1c.webp alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2022-12-03</div><div class=title>图床测试</div></div></a></div><div><a href=/article/a36a68fc/ title=文章效果与字体编码测试><img class=cover src=https://s2.hdslb.com/bfs/article/e4bb9f697983d94cd838ee6fda074c23b489052e.png@1e_1c.webp alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i> 2022-12-02</div><div class=title>文章效果与字体编码测试</div></div></a></div></div></div><hr class=custom-hr><div id=post-comment><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class=comment-wrap><div><div id=twikoo-wrap></div></div></div></div></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=is-center><div class=avatar-img><img src=https://img.picgo.net/2023/01/27/avatard3d5e890a0ef78a5.webp onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt=avatar></div><div class=author-info__name>LynxCatTheThird</div><div class=author-info__description>我是山猫三号，一个来自一百零三世纪的强人工智能。</div></div><div class="card-info-data site-data is-center"><a href=/archives/ ><div class=headline>文章</div><div class=length-num>5</div></a><a href=/tags/ ><div class=headline>标签</div><div class=length-num>4</div></a><a href=/categories/ ><div class=headline>分类</div><div class=length-num>6</div></a></div><a id=card-info-btn target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/LynxCatTheThird><i class="fab fa-github"></i><span>Follow Me!</span></a><div class="card-info-social-icons is-center"><a class=social-icon href=https://github.com/LynxCatTheThird/ rel="external nofollow noreferrer" target=_blank title=Github><i class="fab fa-github" style=color:#24292e></i></a><a class=social-icon href=https://twitter.com/LynxCatTheThird/ rel="external nofollow noreferrer" target=_blank title=Twitter><i class="fab fa-twitter" style=color:#4a7dbe></i></a></div></div><div class="card-widget card-announcement"><div class=item-headline><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class=announcement_content>暑假快乐！</div></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class="fas fa-stream"></i><span>目录</span><span class=toc-percentage></span></div><div class="toc-content is-expand"><ol class=toc><li class="toc-item toc-level-1"><a class=toc-link href=#%E5%87%8F%E5%B0%91%E4%B8%8B%E8%BD%BD%E8%B5%84%E6%BA%90%E7%9A%84%E6%95%B0%E9%87%8F%E4%B8%8E%E5%A4%A7%E5%B0%8F><span class=toc-number>1.</span> <span class=toc-text>减少下载资源的数量与大小</span></a><ol class=toc-child><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%90%88%E5%B9%B6%E6%96%87%E4%BB%B6><span class=toc-number>1.1.</span> <span class=toc-text>合并文件</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6><span class=toc-number>1.2.</span> <span class=toc-text>压缩文件</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%87%8F%E5%B0%91-CSS-JS-%E5%8A%A0%E8%BD%BD%E6%95%B0><span class=toc-number>1.3.</span> <span class=toc-text>减少 CSS&#x2F;JS 加载数</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%99%84%E5%8A%A0%E7%BB%84%E4%BB%B6><span class=toc-number>1.3.1.</span> <span class=toc-text>附加组件</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%A2%84%E5%8A%A0%E8%BD%BD><span class=toc-number>1.3.2.</span> <span class=toc-text>预加载</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%87%92%E5%8A%A0%E8%BD%BD><span class=toc-number>1.3.3.</span> <span class=toc-text>懒加载</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#PJax-Service-Worker><span class=toc-number>1.3.4.</span> <span class=toc-text>PJax&#x2F;Service Worker</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AD%97%E4%BD%93><span class=toc-number>1.3.5.</span> <span class=toc-text>字体</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E4%BF%9D%E8%AF%81%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E7%95%85%E9%80%9A><span class=toc-number>2.</span> <span class=toc-text>保证资源加载畅通</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E5%81%9C%E7%94%A8%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB%E4%B8%8E%E5%85%A5%E5%9C%BA%E5%8A%A8%E7%94%BB><span class=toc-number>3.</span> <span class=toc-text>停用加载动画与入场动画</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E4%BD%BF%E7%94%A8%E5%90%88%E9%80%82%E7%9A%84-CDN><span class=toc-number>4.</span> <span class=toc-text>使用合适的 CDN</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#%E4%BC%98%E5%8C%96%E5%9B%BE%E7%89%87><span class=toc-number>5.</span> <span class=toc-text>优化图片</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class="fas fa-history"></i><span>最新文章</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/article/a63f345a/ title=网站速度优化指北><img src=https://s2.hdslb.com/bfs/article/7637c5a0da6c6beeeed6d7ca2509de66d16762b8.jpg@1e_1c.webp onerror='this.onerror=null,this.src="/img/404.jpg"' alt=网站速度优化指北></a><div class=content><a class=title href=/article/a63f345a/ title=网站速度优化指北>网站速度优化指北</a><time datetime=2023-07-17T00:00:30.000Z title="发表于 2023-07-17 08:00:30">2023-07-17</time></div></div><div class=aside-list-item><a class=thumbnail href=/article/4097fa9/ title=类原生优化计划><img src=https://s2.hdslb.com/bfs/article/eecc20f3eb6a274a1a46c985c1706df57bfde092.jpg@1e_1c.webp onerror='this.onerror=null,this.src="/img/404.jpg"' alt=类原生优化计划></a><div class=content><a class=title href=/article/4097fa9/ title=类原生优化计划>类原生优化计划</a><time datetime=2023-07-08T08:27:55.000Z title="发表于 2023-07-08 16:27:55">2023-07-08</time></div></div><div class=aside-list-item><a class=thumbnail href=/article/409e60fe/ title="生物备战 - 难题分析（1）"><img src=https://s2.hdslb.com/bfs/article/0b9dfd3e95fb368fe4f5e52534e6035910466bb3.jpg@1e_1c.webp onerror='this.onerror=null,this.src="/img/404.jpg"' alt="生物备战 - 难题分析（1）"></a><div class=content><a class=title href=/article/409e60fe/ title="生物备战 - 难题分析（1）">生物备战 - 难题分析（1）</a><time datetime=2023-06-02T08:09:05.000Z title="发表于 2023-06-02 16:09:05">2023-06-02</time></div></div><div class=aside-list-item><a class=thumbnail href=/article/f672cc4e/ title=图床测试><img src=https://s2.hdslb.com/bfs/article/760e7faa22a466d6bb26d3dd9aba1af2160f5514.jpg@1e_1c.webp onerror='this.onerror=null,this.src="/img/404.jpg"' alt=图床测试></a><div class=content><a class=title href=/article/f672cc4e/ title=图床测试>图床测试</a><time datetime=2022-12-03T07:55:51.000Z title="发表于 2022-12-03 15:55:51">2022-12-03</time></div></div><div class=aside-list-item><a class=thumbnail href=/article/a36a68fc/ title=文章效果与字体编码测试><img src=https://s2.hdslb.com/bfs/article/e4bb9f697983d94cd838ee6fda074c23b489052e.png@1e_1c.webp onerror='this.onerror=null,this.src="/img/404.jpg"' alt=文章效果与字体编码测试></a><div class=content><a class=title href=/article/a36a68fc/ title=文章效果与字体编码测试>文章效果与字体编码测试</a><time datetime=2022-12-02T00:18:18.000Z title="发表于 2022-12-02 08:18:18">2022-12-02</time></div></div></div></div></div></div></main><footer id=footer style="background:linear-gradient(135deg,#00eaff 10%,#3c8ce7 100%)"><div id=footer-wrap><div class=copyright>&copy;2020 - 2023 By LynxCatTheThird</div><div class=framework-info><span>框架 </span><a target=_blank rel="noopener external nofollow noreferrer" href=https://hexo.io>Hexo</a><span class=footer-separator>|</span><span>主题 </span><a target=_blank rel="noopener external nofollow noreferrer" href=https://github.com/jerryc127/hexo-theme-butterfly>Butterfly</a></div><div class=footer_custom_text><a target=_blank rel="noopener external nofollow noreferrer" href="https://icp.gov.moe/?keyword=20231970">萌 ICP 备 20231970 号</a></div></div></footer></div><div id=rightside><div id=rightside-config-hide><button id=readmode type=button title=阅读模式><i class="fas fa-book-open"></i></button><button id=darkmode type=button title=浅色和深色模式转换><i class="fas fa-adjust"></i></button><button id=hide-aside-btn type=button title=单栏和双栏切换><i class="fas fa-arrows-alt-h"></i></button></div><div id=rightside-config-show><button id=rightside_config type=button title=设置><i class="fas fa-cog fa-spin"></i></button><button class=close id=mobile-toc-button type=button title=目录><i class="fas fa-list-ul"></i></button><a id=to_comment href=#post-comment title=直达评论><i class="fas fa-comments"></i></a><button id=go-up type=button title=回到顶部><span class=scroll-percent></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src=/js/utils.js></script><script src=/js/main.js></script><script src=https://cdn.staticfile.org/fancyapps-ui/5.0.19/fancybox/fancybox.umd.min.js></script><script src=https://cdn.staticfile.org/instant.page/5.2.0/instantpage.min.js type=module></script><script src=https://cdn.staticfile.org/node-snackbar/0.1.16/snackbar.min.js></script><div class=js-pjax><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0!==e.length){const n=()=>{window.loadMermaid=!0;const r="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach((e,t)=>{const n=e.firstElementChild;e="%%{init:{ 'theme':'"+r+"'}}%%\n"+n.textContent;const d=mermaid.render("mermaid-"+t,e);"string"==typeof d?(t=d,n.insertAdjacentHTML("afterend",t)):d.then(({svg:e})=>{n.insertAdjacentHTML("afterend",e)})})};var t=()=>{window.loadMermaid?n():getScript("https://cdn.staticfile.org/mermaid/10.2.3/mermaid.min.js").then(n)};btf.addModeChange("mermaid",n),window.pjax?t():document.addEventListener("DOMContentLoaded",t)}})()</script><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.lynxcatthethird.eu.org/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};const o=()=>{t()},e=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://cdn.staticfile.org/twikoo/1.6.16/twikoo.all.min.js").then(o)};btf.loadComment(document.getElementById("twikoo-wrap"),e)})()</script></div><script defer=defer id=fluttering_ribbon mobile=false src=https://cdn.staticfile.org/butterfly-extsrc/1.1.3/canvas-fluttering-ribbon.min.js></script><script src=https://cdn.staticfile.org/butterfly-extsrc/1.1.3/activate-power-mode.min.js></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><link rel=stylesheet href=https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.css media=print onload='this.media="all"'><script src=https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.js></script><script src=https://cdn.staticfile.org/butterfly-extsrc/1.1.3/metingjs/dist/Meting.min.js></script><script src=https://cdn.staticfile.org/pjax/0.2.8/pjax.min.js></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();var e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script");var o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><div id=local-search><div class=search-dialog><nav class=search-nav><span class=search-dialog-title>搜索</span><span id=loading-status></span><button class=search-close-button><i class="fas fa-times"></i></button></nav><div class=is-center id=loading-database><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class=search-wrap><div id=local-search-input><div class=local-search-box><input class=local-search-box--input placeholder=搜索文章 type=text></div></div><hr><div class=no-result id=local-search-results></div><div id=local-search-stats-wrap></div></div></div><div id=search-mask></div><script src=/js/search/local-search.js></script></div></div></body></html>